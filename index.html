<!doctype html><html lang="ru"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Калькулятор калорий и самочувствия</title>
<style>
:root{--bg:#f5f7fb;--fg:#111;--mut:#666;--card:#fff;--pri:#2b7cff;--br:#e9edf3}
*{box-sizing:border-box}body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto}
.wrap{max-width:860px;margin:32px auto;padding:0 16px}
.card{background:var(--card);border:1px solid var(--br);border-radius:14px;padding:20px;margin:16px 0;box-shadow:0 4px 12px rgba(15,23,42,.04)}
h1,h2{margin:0 0 12px}.mut{color:var(--mut);margin:8px 0 0}
.row{display:grid;gap:12px;grid-template-columns:repeat(2,minmax(0,1fr))}
label{font-size:13px;color:var(--mut);display:block;margin-bottom:4px}
input,select,button{width:100%;padding:10px 12px;border:1px solid var(--br);border-radius:10px;background:#fff}
button{background:var(--pri);color:#fff;border:none;font-weight:600;cursor:pointer}
.out{background:#f7f9ff;border:1px dashed #d6def5;border-radius:10px;padding:12px;font-weight:600;white-space:pre-line}
.small{font-size:12px;color:#777}
.no-print{display:inline-block}.print-only{display:none}
@media print{body{background:#fff}.row,.mut,.small,.no-print,button{display:none!important}.card{border:none;box-shadow:none;background:#fff}.out{border:1px solid #ddd;background:#fff}.print-only{display:block}.wrap{max-width:800px;margin:0 auto;padding:0}}
</style>
</head><body><div class="wrap">

<div class="card"><h1>Калькулятор калорий</h1>
<div class="row">
<div><label>Пол</label><select id="sex"><option value="m">Мужской</option><option value="f">Женский</option></select></div>
<div><label>Возраст</label><input id="age" type="number" min="10" max="100" placeholder="лет"></div>
<div><label>Рост (см)</label><input id="h" type="number" min="120" max="230" placeholder="например 175"></div>
<div><label>Вес (кг)</label><input id="w" type="number" min="30" max="300" placeholder="например 70"></div>
<div><label>Активность</label><select id="act">
<option value="1.2">Минимальная (офис)</option>
<option value="1.375">Лёгкая (1–3 трен./нед.)</option>
<option value="1.55">Средняя (3–5 трен./нед.)</option>
<option value="1.725">Высокая (6–7 трен./нед.)</option>
<option value="1.9">Очень высокая</option>
</select></div>
</div>
<div style="display:flex;gap:12px;margin-top:12px"><button onclick="calc()">Рассчитать</button><button onclick="clr()">Сброс</button></div>
<div class="out" id="res" style="margin-top:12px">Введите данные и нажмите «Рассчитать»</div>
<p class="mut">Формула Mifflin–St Jeor. Результаты ориентировочные.</p>
</div>

<div class="card"><h2>Самочувствие и советы</h2>
<div class="row">
<div><label>Усталость (0–10)</label><input id="fatigue" type="number" min="0" max="10" placeholder="например 6"></div>
<div><label>Сон, ч/ночь</label><input id="sleep" type="number" min="0" max="12" placeholder="например 7"></div>
<div><label>Стаканы воды/день</label><input id="water" type="number" min="0" max="20" placeholder="например 6"></div>
<div><label><input type="checkbox" id="ms"> Боль в мышцах</label></div>
<div><label><input type="checkbox" id="head"> Головная боль</label></div>
</div>
<div style="display:flex;gap:12px;margin-top:12px"><button onclick="tips()">Получить советы</button><button onclick="ct()">Очистить</button></div>
<div class="out" id="tips" style="margin-top:12px">Опишите состояние и нажмите «Получить советы»</div>
<p class="small">Информация справочная и не заменяет консультацию врача. При сильной/острой боли — обратитесь к врачу.</p>
</div>

<div class="no-print" style="margin:16px 0"><button onclick="exportPDF()">Экспорт в PDF</button></div>

<div class="print-only" style="margin:8px 0 16px">
  <h2 style="margin:0 0 4px">Отчёт: калории и самочувствие</h2>
  <div class="small">Дата: <span id="stamp"></span></div>
  <pre id="sum" style="margin-top:8px;white-space:pre-wrap"></pre>
</div>

</div><script>
const q=s=>document.querySelector(s),v=s=>q(s).value;
function calc(){
  const sex=v('#sex'),age=+v('#age'),h=+v('#h'),w=+v('#w'),act=+v('#act');
  if(!(age>0&&h>0&&w>0))return q('#res').textContent='Проверьте корректность данных';
  const bmr=10*w+6.25*h-5*age+(sex==='m'?5:-161),tdee=bmr*act;
  q('#res').textContent=`Поддержание веса: ~${Math.round(tdee)} ккал/день
Лёгкое похудение (≈10–15%): ~${Math.round(tdee*0.88)} ккал/день
Быстрое похудение (≈20%): ~${Math.round(tdee*0.80)} ккал/день`;
}
function clr(){['#age','#h','#w'].forEach(i=>q(i).value='');q('#res').textContent='Введите данные и нажмите «Рассчитать»'}
function tips(){
  let out=[],fat=+v('#fatigue')||0,sleep=+v('#sleep')||0,water=+v('#water')||0,ms=q('#ms').checked,head=q('#head').checked;
  if(fat>=7)out.push('Сделайте разгрузочный день: лёгкая активность, ранний сон, больше воды.');
  if(ms)out.push('Мышцы: 1–2 дня отдыха, мягкая растяжка, тёплый душ, белок 1.2–1.6 г/кг.');
  if(head)out.push('Голова: питьё, перерывы от экрана, проветривание, умеренный кофе/чай.');
  if(sleep<7)out.push('Сон 7–9 ч, стабильный режим, тёмная прохладная комната.');
  if(water<6)out.push('Пейте регулярно: светлая моча — хороший ориентир.');
  if(!out.length)out.push('Продолжайте: баланс питания, шаги 6–10 тыс., разминка/заминка.');
  out.push('При усиливающихся симптомах — к врачу.');
  q('#tips').textContent=out.join(' ');
}
function ct(){['#fatigue','#sleep','#water'].forEach(i=>q(i).value='');['#ms','#head'].forEach(i=>q(i).checked=false);q('#tips').textContent='Опишите состояние и нажмите «Получить советы»'}
function exportPDF(){
  const res=q('#res').textContent||'',tips=q('#tips').textContent||'';
  if(res.includes('Введите данные')&&tips.includes('Опишите состояние')){alert('Сначала рассчитайте калории и получите советы — потом экспортируйте в PDF.');return}
  const d=new Date(),sex=q('#sex').value,sexT=sex==='m'?'Мужской':'Женский',actT=q('#act').selectedOptions[0].text;
  q('#stamp').textContent=d.toLocaleString('ru-RU');
  q('#sum').textContent=`Данные пользователя:
Пол: ${sexT}
Возраст: ${v('#age')} лет
Рост: ${v('#h')} см
Вес: ${v('#w')} кг
Активность: ${actT}

Результаты:
${res}

Самочувствие:
Усталость: ${v('#fatigue')||0}/10
Сон: ${v('#sleep')||0} ч
Вода: ${v('#water')||0} ст.
Мышечная боль: ${q('#ms').checked?'да':'нет'}
Головная боль: ${q('#head').checked?'да':'нет'}

Советы:
${tips}`;
  window.print();
}
</script></body></html>